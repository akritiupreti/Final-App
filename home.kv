<PopupMain@Popup>
    auto_dismiss: False
    title: "INTRUDER ALERT!"
    halign: 'center'
    MDScreen:
        name: "known"
        MDFloatLayout:
            md_bg_color: 1, 1, 1, 1
            Image:
                source: 'Intruders/intruder.jpg'
                halign: 'center'
                pos_hint: {"center_x": .5, "center_y": .7}

            MDLabel:
                font_size: 15
                text: 'An intruder has been detected!'
                font_name: "BPoppins"
                halign: 'center'
                size_hint_y: None
                pos_hint: {"center_x": .5, "center_y": .95}
                height: self.texture_size[1]
                padding_y: 15

            MDLabel:
                font_size: 15
                text: 'Do you know this person?'
                font_name: "MPoppins"
                halign: 'center'
                size_hint_y: None
                pos_hint: {"center_x": .5, "center_y": .4}
                height: self.texture_size[1]
                padding_y: 15

            MDRectangleFlatButton:
                text: "Yes"
                size_hint: .66, .065
                pos_hint: {"center_x": .5, "center_y": .3}
                text_color: 1, 1, 1, 1
                md_bg_color: 0, 0, 34, 255
                font_name: "BPoppins"
                canvas.before:
                    Color:
                        rgb: rgba(52, 0, 231, 255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [3]
                on_release:
                    root.dismiss()
                    app.callPopupRegister()

            MDRectangleFlatButton:
                text: "No"
                size_hint: .66, .065
                pos_hint: {"center_x": .5, "center_y": .2}
                text_color: 1, 1, 1, 1
                md_bg_color: 0, 0, 34, 255
                font_name: "BPoppins"
                canvas.before:
                    Color:
                        rgb: rgba(52, 0, 231, 255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [3]
                on_release:
                    app.knownFlag('00')
                    root.dismiss()

<PopupRegister@Popup>
    auto_dismiss: False
    title: "INTRUDER ALERT!"
    MDScreen:
        name: "register"
        MDFloatLayout:
            md_bg_color: 1, 1, 1, 1
            Image:
                source: 'Intruders/intruder.jpg'
                halign: 'center'
                pos_hint: {"center_x": .5, "center_y": .7}

            MDLabel:
                font_size: 15
                text: 'An intruder has been detected!'
                font_name: "BPoppins"
                halign: 'center'
                size_hint_y: None
                pos_hint: {"center_x": .5, "center_y": .95}
                height: self.texture_size[1]
                padding_y: 15

            MDLabel:
                font_size: 15
                text: "Do you want to register this person's face?"
                font_name: "MPoppins"
                halign: 'center'
                size_hint_y: None
                pos_hint: {"center_x": .5, "center_y": .4}
                height: self.texture_size[1]
                padding_y: 15

            MDRectangleFlatButton:
                text: "Yes"
                size_hint: .66, .065
                pos_hint: {"center_x": .5, "center_y": .3}
                text_color: 1, 1, 1, 1
                md_bg_color: 0, 0, 34, 255
                font_name: "BPoppins"
                canvas.before:
                    Color:
                        rgb: rgba(52, 0, 231, 255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [3]
                on_release:
                    root.dismiss()
                    app.knownFlag('11', name.text)
                    app.callPopupSuccessful()

            MDLabel:
                font_size: 11
                text: "If yes, please enter the intruder's name"
                font_name: "MPoppins"
                halign: 'center'
                size_hint_y: None
                pos_hint: {"center_x": .5, "center_y": .23}
                height: self.texture_size[1]
                padding_y: 15

            TextInput:
                id: name
                hint_text: "Intruder's name"
                font_name: "MPoppins"
                size_hint_y: None
                halign: 'center'
                pos_hint: {"center_x": .5, "center_y": .12}
                background_color: 1, 1, 1, 0
                foreground_color: rgba(0, 0, 59, 255)
                cursor_color: rgba(0, 0, 59, 255)
                font_size: 12
                cursor_width: "2sp"
                multiline: False

            MDRectangleFlatButton:
                text: "No"
                size_hint: .66, .065
                pos_hint: {"center_x": .5, "center_y": .11}
                text_color: 1, 1, 1, 1
                md_bg_color: 0, 0, 34, 255
                font_name: "BPoppins"
                canvas.before:
                    Color:
                        rgb: rgba(52, 0, 231, 255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [3]
                on_release:
                    app.knownFlag('10')
                    root.dismiss()


<PopupSuccessful@Popup>
    auto_dismiss: False
    title: "INTRUDER ALERT!"
    MDScreen:
        name: "success"
        MDFloatLayout:
            md_bg_color: 1, 1, 1, 1
            MDLabel:
                font_size: 30
                text: 'SUCCESS!'
                font_name: "BPoppins"
                halign: 'center'
                size_hint_y: None
                pos_hint: {"center_x": .5, "center_y": .8}
                height: self.texture_size[1]
                padding_y: 15

            MDRectangleFlatButton:
                text: "Exit"
                size_hint: .66, .065
                pos_hint: {"center_x": .5, "center_y": .2}
                text_color: 1, 1, 1, 1
                md_bg_color: 0, 0, 34, 255
                font_name: "BPoppins"
                canvas.before:
                    Color:
                        rgb: rgba(52, 0, 231, 255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [3]
                on_release:
                    root.dismiss()


<PopupNotHome@Popup>
    auto_dismiss: False
    title: "INTRUDER ALERT!"
    halign: 'center'
    MDScreen:
        name: "known"
        MDFloatLayout:
            md_bg_color: 1, 1, 1, 1
            Image:
                source: 'Intruders/intruder.jpg'
                halign: 'center'
                pos_hint: {"center_x": .5, "center_y": .7}

            MDLabel:
                font_size: 15
                text: 'An intruder has been detected!'
                font_name: "BPoppins"
                halign: 'center'
                size_hint_y: None
                pos_hint: {"center_x": .5, "center_y": .95}
                height: self.texture_size[1]
                padding_y: 15

            MDLabel:
                font_size: 15
                text: 'This person was detected by Watchdog'
                font_name: "MPoppins"
                halign: 'center'
                size_hint_y: None
                pos_hint: {"center_x": .5, "center_y": .4}
                height: self.texture_size[1]
                padding_y: 15

            MDRectangleFlatButton:
                text: "Exit"
                size_hint: .66, .065
                pos_hint: {"center_x": .5, "center_y": .15}
                text_color: 1, 1, 1, 1
                md_bg_color: 0, 0, 34, 255
                font_name: "BPoppins"
                canvas.before:
                    Color:
                        rgb: rgba(52, 0, 231, 255)
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [3]
                on_release:
                    root.dismiss()


MDScreen:
    name: "default"
    MDBottomNavigation:
        id: navbar
        MDBottomNavigationItem:
            id: home
            name: "home"
            text: "Home"
            icon: "home"
            MDFloatLayout:
                md_bg_color: 1, 1, 1, 1

                Image:
                    source: "assets/icon.jpg"
                    pos_hint: {"center_x": .5, "center_y": 0.75}
                    size_hint: .3, .3

                MDLabel:
                    font_size: 20
                    text: 'Are you home?'
                    font_name: "MPoppins"
                    halign: 'center'
                    size_hint_y: None
                    pos_hint: {"center_x": .5, "center_y": .53}
                    height: self.texture_size[1]
                    padding_y: 15


                Switch:
                    id: switch
                    active: True
                    on_active: app.on_action() if switch.active else app.off_action()

                    pos_hint: {"center_x": .5, "center_y": .45}

                MDRectangleFlatButton:
                    text: "Refresh"
                    size_hint: .66, .065
                    pos_hint: {"center_x": .5, "center_y": .1}
                    text_color: 1, 1, 1, 1
                    md_bg_color: 0, 0, 34, 255
                    font_name: "BPoppins"
                    canvas.before:
                        Color:
                            rgb: rgba(52, 0, 231, 255)
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [5]
                    on_release:
                        app.keep_checking_for_intruders()

        MDBottomNavigationItem:
            name: "about"
            text: "About us"
            icon: "chat"
            MDFloatLayout:
                md_bg_color: 1, 1, 1, 1

                MDLabel:
                    font_name: "BPoppins"
                    font_size: 17
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.85}
                    text: "Integrating Facial Recognition with Motion Capture using OpenCV and Raspberry Pi for Advanced Intruder Detection in Security Systems"
                    text_color: 0, 0, 0, 0

                MDLabel:
                    font_name: "BPoppins"
                    font_size: 16
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.6}
                    text: "Creators"
                    text_color: 0, 0, 0, 0

                MDLabel:
                    font_name: "MPoppins"
                    font_size: 15
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.53}
                    text: "Akriti Upreti\nBiraj Chhetri"
                    text_color: 0, 0, 0, 0

                MDLabel:
                    font_name: "MPoppins"
                    font_size: 15
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.35}
                    text: "We pursue BTech Computer Science and Engineering in VIT Vellore.\n"
                    text_color: 0, 0, 0, 0

                MDLabel:
                    font_name: "MPoppins"
                    font_size: 15
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.23}
                    text: "The purpose of this project is to provide a smart home security system with convenient access to owners through the help of our mobile app."
                    text_color: 0, 0, 0, 0

        MDBottomNavigationItem:
            name: "instructions"
            text: "Instructions"
            icon: "coffee"
            MDFloatLayout:
                md_bg_color: 1, 1, 1, 1

                MDLabel:
                    font_name: "BPoppins"
                    font_size: 30
                    halign: "center"
                    pos_hint: {"center_x": 0.5, "center_y": 0.85}
                    text: "Instructions"
                    text_color: 0, 0, 0, 0

                MDLabel:
                    font_name: "MPoppins"
                    font_size: 15
                    halign: "left"
                    pos_hint: {"center_x": 0.55, "center_y": 0.7}
                    text: "If you are in your home, please turn the 'Are you home?' switch ON.\nElse, turn it OFF."
                    text_color: 0, 0, 0, 0

                MDLabel:
                    font_name: "MPoppins"
                    font_size: 15
                    halign: "left"
                    pos_hint: {"center_x": 0.55, "center_y": 0.56}
                    text: "Keep your mobile data or Wifi on.\nDo NOT close this app so that it can run in the background."
                    text_color: 0, 0, 0, 0

                MDLabel:
                    font_name: "MPoppins"
                    font_size: 15
                    halign: "left"
                    pos_hint: {"center_x": 0.55, "center_y": 0.4}
                    text: "If you are in your home when an intruder is detected, you will be able to decide if the intruder is friendly or not through your phone."
                    text_color: 0, 0, 0, 0

                MDLabel:
                    font_name: "MPoppins"
                    font_size: 15
                    halign: "left"
                    pos_hint: {"center_x": 0.55, "center_y": 0.22}
                    text: "However, if you are not home, you will only be notified of the intruder, and an alarm is sounded in your home if the intruder does not leave."
                    text_color: 0, 0, 0, 0